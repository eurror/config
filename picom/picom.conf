backend = "glx"
glx-no-stencil = true
glx-no-rebind-pixmap = true
glx-copy-from-front = false
experimental-backends = false

vsync = true
# unredir-if-possible = true
# unredir-if-possible-delay = 300

shadow = false
fading = false
# animations = false
no-fading-openclose = true
no-fading-destroyed-argb = true

active-opacity = 1.0
inactive-opacity = 0.90
frame-opacity = 0.90
menu-opacity = 0.90

blur-method = "dual_kawase"
blur-strength = 3
blur-background = true
blur-background-frame = false
blur-background-fixed = false

blur-exclude = [
  "window_type = 'dock'",
  "window_type = 'desktop'",
  "_GTK_FRAME_EXTENTS@:c",
  "class_g = 'slop'",
  "class_g = 'Firefox' && argb"
]

# Performance optimizations
use-damage = true
xrender-sync-fence = true

detect-rounded-corners = true
detect-client-opacity = true
detect-transient = true
detect-client-leader = true
mark-wmwin-focused = true
mark-ovredir-focused = true

wintypes:
{
  tooltip = { fade = false shadow = false opacity = 0.90 focus = true full-shadow = false }
  dock = { shadow = false clip-shadow-above = true }
  dnd = { shadow = false }
  popup_menu = { opacity = 0.90 }
  dropdown_menu = { opacity = 0.90 }
}

# Exclude problematic windows
shadow-exclude = [
  "class_g = 'Polybar'",
  "_GTK_FRAME_EXTENTS@:c",
  "class_g = 'slop'",
  "class_g = 'Peek'"
]

focus-exclude = [
  "class_g = 'Cairo-clock'",
  "class_g = 'slop'"
]

opacity-rule = [
  "100:class_g = 'Firefox'",
  "100:class_g = 'Chromium'",
  "100:class_g = 'Code'",
  "100:class_g = 'Rofi'"
]

log-level = "warn"